## 总体概览

![image-20210117204401403](https://ning-wang.oss-cn-beijing.aliyuncs.com/blog-imags/image-20210117204401403.png)

MySQL最重要、最与众不同的特性就是它的**存储引擎架构**，这种架构将：**查询处理、其他系统任务、数据的存储与提取** 三部分分离。所以，带来的好处就是可以在使用时**根据性能、特性，以及其他需求来选择数据存储方式**。

存储引擎架构分为三层，自上而下，分为**第一层：连接层；第二层：服务层；第三层：引擎层**。

**连接层：**

MySQL的最上层是连接服务，引入了线程池的概念，允许多台客户端连接。主要工作是：**连接处理、授权认证、安全防护等**。连接层为通过安全认证的接入用户提供线程，同样，在该层上可以实现基于SSL 的安全连接。

**服务层：**

服务层用于处理核心服务，如**标准的SQL接口**、**查询解析**、**SQL优化和统计**、**全局的和引擎依赖的缓存与缓冲器**等等。所有的与存储引擎无关的工作，如过程、函数等，都会在这一层来处理。在该层上，服务器会解析查询并创建相应的内部解析树，并对其完成优化，如确定查询表的顺序，是否利用索引等，最后生成相关的执行操作。如果是SELECT 语句，服务器还会查询内部的缓存。如果缓存空间足够大，这样在解决大量读操作的环境中能够很好的提升系统的性能。

> SQL优化模块会修改一部分SQL的执行语句，但不会对查询结果产生影响。例如**索引为何失效，一般是这一层搞得鬼**。

**引擎层：**

存储引擎层，存储引擎负责实际的MySQL数据的**存储与提取**，**服务器通过API 与 存储引擎进行通信**。不同的存储引擎功能和特性有所不同，这样可以根据实际需要有针对性的使用不同的存储引擎。

