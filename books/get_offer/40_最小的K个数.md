## é¢˜ç›®

> [å‰‘æŒ‡ Offer 40. æœ€å°çš„kä¸ªæ•°](https://leetcode-cn.com/problems/zui-xiao-de-kge-shu-lcof/)

è¾“å…¥æ•´æ•°æ•°ç»„ `arr` ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°çš„ `k` ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥4ã€5ã€1ã€6ã€2ã€7ã€3ã€8è¿™8ä¸ªæ•°å­—ï¼Œåˆ™æœ€å°çš„4ä¸ªæ•°å­—æ˜¯1ã€2ã€3ã€4ã€‚

**ç¤ºä¾‹ 1**ï¼š

```text
è¾“å…¥ï¼šarr = [3,2,1], k = 2
è¾“å‡ºï¼š[1,2] æˆ–è€… [2,1]
```


**ç¤ºä¾‹ 2**ï¼š

```text
è¾“å…¥ï¼šarr = [0,1,2,1], k = 1
è¾“å‡ºï¼š[0]
```

**é™åˆ¶ï¼š**

- `0 <= k <= arr.length <= 10000`
- `0 <= arr[i] <= 10000`



## é¢˜è§£

>  æ‘˜æŠ„è‡³-[4ç§è§£æ³•ç§’æ€TopKï¼ˆå¿«æ’/å †/äºŒå‰æœç´¢æ ‘/è®¡æ•°æ’åºï¼‰](https://leetcode-cn.com/problems/zui-xiao-de-kge-shu-lcof/solution/3chong-jie-fa-miao-sha-topkkuai-pai-dui-er-cha-sou/)

å¯¹äºç»å…¸TopKé—®é¢˜ï¼Œæœ¬æ–‡ç»™å‡º 4 ç§é€šç”¨è§£å†³æ–¹æ¡ˆã€‚

è§£é¢˜æ€è·¯ï¼š

* ç”¨å¿«æ’æœ€æœ€æœ€é«˜æ•ˆè§£å†³ TopK é—®é¢˜ï¼š
* å¤§æ ¹å †(å‰ K å°) / å°æ ¹å †ï¼ˆå‰ K å¤§),Javaä¸­æœ‰ç°æˆçš„ PriorityQueueï¼Œå®ç°èµ·æ¥æœ€ç®€å•ï¼š
* äºŒå‰æœç´¢æ ‘ä¹Ÿå¯ä»¥ è§£å†³ TopK é—®é¢˜å“¦

å¿«æ’

```java
class Solution {
    public int[] getLeastNumbers(int[] arr, int k) {
        if (k == 0 || arr.length == 0) {
            return new int[0];
        }
        // æœ€åä¸€ä¸ªå‚æ•°è¡¨ç¤ºæˆ‘ä»¬è¦æ‰¾çš„æ˜¯ä¸‹æ ‡ä¸ºk-1çš„æ•°
        return quickSearch(arr, 0, arr.length - 1, k - 1);
    }

    private int[] quickSearch(int[] nums, int lo, int hi, int k) {
        // æ¯å¿«æ’åˆ‡åˆ†1æ¬¡ï¼Œæ‰¾åˆ°æ’åºåä¸‹æ ‡ä¸ºjçš„å…ƒç´ ï¼Œå¦‚æœjæ°å¥½ç­‰äºkå°±è¿”å›jä»¥åŠjå·¦è¾¹æ‰€æœ‰çš„æ•°ï¼›
        int j = partition(nums, lo, hi);
        if (j == k) {
            return Arrays.copyOf(nums, j + 1);
        }
        // å¦åˆ™æ ¹æ®ä¸‹æ ‡jä¸kçš„å¤§å°å…³ç³»æ¥å†³å®šç»§ç»­åˆ‡åˆ†å·¦æ®µè¿˜æ˜¯å³æ®µã€‚
        return j > k? quickSearch(nums, lo, j - 1, k): quickSearch(nums, j + 1, hi, k);
    }

    // å¿«æ’åˆ‡åˆ†ï¼Œè¿”å›ä¸‹æ ‡jï¼Œä½¿å¾—æ¯”nums[j]å°çš„æ•°éƒ½åœ¨jçš„å·¦è¾¹ï¼Œæ¯”nums[j]å¤§çš„æ•°éƒ½åœ¨jçš„å³è¾¹ã€‚
    private int partition(int[] nums, int lo, int hi) {
        int v = nums[lo];
        int i = lo, j = hi + 1;
        while (true) {
            while (++i <= hi && nums[i] < v);
            while (--j >= lo && nums[j] > v);
            if (i >= j) {
                break;
            }
            int t = nums[j];
            nums[j] = nums[i];
            nums[i] = t;
        }
        nums[lo] = nums[j];
        nums[j] = v;
        return j;
    }
}
```

å †

æœ¬é¢˜æ˜¯æ±‚å‰ K å°ï¼Œå› æ­¤ç”¨ä¸€ä¸ªå®¹é‡ä¸º K çš„å¤§æ ¹å †ï¼Œæ¯æ¬¡ poll å‡ºæœ€å¤§çš„æ•°ï¼Œé‚£å †ä¸­ä¿ç•™çš„å°±æ˜¯å‰ K å°å•¦ï¼ˆæ³¨æ„ä¸æ˜¯å°æ ¹å †ï¼å°æ ¹å †çš„è¯éœ€è¦æŠŠå…¨éƒ¨çš„å…ƒç´ éƒ½å…¥å †ï¼Œé‚£æ˜¯ O(NlogN)ğŸ˜‚ï¼Œå°±ä¸æ˜¯ O(NlogK)O(NlogK)å•¦ï½ï½ï¼‰
è¿™ä¸ªæ–¹æ³•æ¯”å¿«æ’æ…¢ï¼Œä½†æ˜¯å› ä¸º Java ä¸­æä¾›äº†ç°æˆçš„ PriorityQueueï¼ˆé»˜è®¤å°æ ¹å †ï¼‰ï¼Œæ‰€ä»¥å®ç°èµ·æ¥æœ€ç®€å•ï¼Œæ²¡å‡ è¡Œä»£ç ï½

```java
class Solution {
    public int[] getLeastNumbers(int[] arr, int k) {
        if (k == 0 || arr.length == 0) {
            return new int[0];
        }
        // æœ€åä¸€ä¸ªå‚æ•°è¡¨ç¤ºæˆ‘ä»¬è¦æ‰¾çš„æ˜¯ä¸‹æ ‡ä¸ºk-1çš„æ•°
        return quickSearch(arr, 0, arr.length - 1, k - 1);
    }

    private int[] quickSearch(int[] nums, int lo, int hi, int k) {
        // æ¯å¿«æ’åˆ‡åˆ†1æ¬¡ï¼Œæ‰¾åˆ°æ’åºåä¸‹æ ‡ä¸ºjçš„å…ƒç´ ï¼Œå¦‚æœjæ°å¥½ç­‰äºkå°±è¿”å›jä»¥åŠjå·¦è¾¹æ‰€æœ‰çš„æ•°ï¼›
        int j = partition(nums, lo, hi);
        if (j == k) {
            return Arrays.copyOf(nums, j + 1);
        }
        // å¦åˆ™æ ¹æ®ä¸‹æ ‡jä¸kçš„å¤§å°å…³ç³»æ¥å†³å®šç»§ç»­åˆ‡åˆ†å·¦æ®µè¿˜æ˜¯å³æ®µã€‚
        return j > k? quickSearch(nums, lo, j - 1, k): quickSearch(nums, j + 1, hi, k);
    }

    // å¿«æ’åˆ‡åˆ†ï¼Œè¿”å›ä¸‹æ ‡jï¼Œä½¿å¾—æ¯”nums[j]å°çš„æ•°éƒ½åœ¨jçš„å·¦è¾¹ï¼Œæ¯”nums[j]å¤§çš„æ•°éƒ½åœ¨jçš„å³è¾¹ã€‚
    private int partition(int[] nums, int lo, int hi) {
        int v = nums[lo];
        int i = lo, j = hi + 1;
        while (true) {
            while (++i <= hi && nums[i] < v);
            while (--j >= lo && nums[j] > v);
            if (i >= j) {
                break;
            }
            int t = nums[j];
            nums[j] = nums[i];
            nums[i] = t;
        }
        nums[lo] = nums[j];
        nums[j] = v;
        return j;
    }
}
```



