## Resource

Spring 把所有的资源抽象为 `Resource` 接口

<center><img src="https://ning-wang.oss-cn-beijing.aliyuncs.com/blog-imags/20210415164657.png" alt="image-20210415164657247"  /></center>

* `EncodedResource`: 提供可以编解码的 `Resource`
* `AbstractResource`: `Resource` 的默认实现, 提供大部分公用的方法

## ResourceLoader

`ResourceLoader` 实现不同的 `Resource` 加载策略, 按需返回特性类型的 `Resource`

<center><img src="https://ning-wang.oss-cn-beijing.aliyuncs.com/blog-imags/20210415165532.png" alt="image-20210415165532593"  /></center>

`DefaultResourceLoader`: 提供大部分 `Resource` 的加载方法

```java
@Override
public Resource getResource(String location) {
    Assert.notNull(location, "Location must not be null");

    for (ProtocolResolver protocolResolver : getProtocolResolvers()) {
        Resource resource = protocolResolver.resolve(location, this);
        if (resource != null) {
            return resource;
        }
    }

    if (location.startsWith("/")) {
        return getResourceByPath(location);
    }
    else if (location.startsWith(CLASSPATH_URL_PREFIX)) {
        return new ClassPathResource(location.substring(CLASSPATH_URL_PREFIX.length()), getClassLoader());
    }
    else {
        try {
            // Try to parse the location as a URL...
            URL url = new URL(location);
            return (ResourceUtils.isFileURL(url) ? new FileUrlResource(url) : new UrlResource(url));
        }
        catch (MalformedURLException ex) {
            // No URL -> resolve as resource path.
            return getResourceByPath(location);
        }
    }
}
```

